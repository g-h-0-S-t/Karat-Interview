<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>JavaScript Interview Questions</title>

<!-- GitHub Dark Theme -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.1.0/github-markdown-dark.min.css"/>

<!-- Highlight.js -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

<!-- Mermaid -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>

<!-- Marked.js -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<style>
  body {
    margin: 0;
    background: #0d1117;
    color: #c9d1d9;
    font-family: system-ui;
  }
  .container {
    max-width: 980px;
    margin: 0 auto;
    padding: 20px;
  }
  pre code {
    white-space: pre-wrap !important;
    word-wrap: break-word !important;
  }
</style>

</head>
<body>

<div class="container markdown-body" id="content">
  <h2>Loadingâ€¦</h2>
</div>

<script>
/* ---------- MERMAID INIT ---------- */
mermaid.initialize({ startOnLoad: false });

/* ---------- SAFE CODE HIGHLIGHTER ---------- */
function safeHighlight(code, lang) {
  try {
    if (lang && hljs.getLanguage(lang)) {
      return hljs.highlight(code, { language: lang }).value;
    }
    return hljs.highlightAuto(code).value;
  } catch (e) {
    console.warn("Highlight fail:", e);
    return code.replace(/[&<>]/g, m => (
      { '&': '&amp;', '<': '&lt;', '>': '&gt;' }[m]
    ));
  }
}

/* ---------- MARKED CONFIG ---------- */
marked.setOptions({
  highlight: (code, lang) => safeHighlight(String(code || "")),
  breaks: true,
  gfm: true
});

/* ---------- LOAD README FROM REPO ---------- */
async function loadReadme() {
  const url = "https://raw.githubusercontent.com/g-h-0-S-t/JavaScript-Interview/main/README.md";
  const container = document.getElementById("content");

  try {
    const res = await fetch(url);
    if (!res.ok) throw new Error("Failed to load README");

    const md = await res.text();
    const html = marked.parse(md);

    container.innerHTML = html;

    /* Render Mermaid blocks */
    const mermaidBlocks = container.querySelectorAll("code.language-mermaid");
    mermaidBlocks.forEach((block, index) => {
      const wrapper = document.createElement("div");
      wrapper.className = "mermaid";
      wrapper.textContent = block.textContent;

      block.parentNode.replaceWith(wrapper);
    });

    mermaid.init();

  } catch (err) {
    console.error(err);
    container.innerHTML = "<h2>Error loading README.md</h2>";
  }
}

loadReadme();
</script>

</body>
</html>
